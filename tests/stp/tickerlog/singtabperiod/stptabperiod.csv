action,ms,bytes,lang,code,repeat,minver,comment
before,0,0,q,.replay.tplogfile: `$raze (testdir;"singtabperiod/testlogs/stptabperiod/"),1,,"Specifying tp log to replay from test directory"
before,0,0,q,if[.replay.segmentedmode;.replay.logstoreplay:.replay.expandstplogs[.replay.logstoreplay]],1,,""
before,0,0,q,.replay.segmentedmode:1,1,,"stptabperiod tp log is a segmented tp log"
before,0,0,q,.replay.tablelist:`quote,1,,"Specifying table to be replayed."
before,0,0,q,.replay.replaylog each .replay.logstoreplay,1,,"Replaying log to test hdb dir"
before,0,0,q,quote: get `$ raze(testdir;"singtabperiod/testhdb/quote"),1,,"load the quote table from hdb dir"
before,0,0,q,trade: get `$ raze(testdir;"singtabperiod/testhdb/trade"),1,,"load the trade table from hdb dir"
true,0,0,q,3930 = count quote,1,,"Count quote > 0"
true,0,0,q,800  = count trade,1,,"Count trade > 0"
true,0,0,q,9 = count meta quote,1,,"Count columns of quote"
true,0,0,q,8 = count meta trade,1,,"Count columns of trade"
run,0,0,q,.os.deldir raze(testdir;"singtabperiod/testhdb/"),1,,"Clean test hdb dir"
