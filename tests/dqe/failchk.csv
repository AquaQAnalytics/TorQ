action,ms,bytes,lang,code,repeat,minver,comment
before,0,0,q,testmeta:([c:`id`funct`vars`procs`procschk`starttime`endtime`output`descp`chkstatus]t:"jssssppsCs";f:10#`;a:10#`),1,,"Store meta of .dqe.results"
comment,0,0,,first check initial insert and teh table meta,1,,"comment"
before,0,0,q,".dqe.initstatusupd[7;`.dqe.test;`testing;`dqe,'`dqe1]",1,,"Set up id 7 for process that doesn't exist"
before,0,0,q,".dqe.initstatusupd[8;`.dqe.test;`testing;`dqe,'`]",1,,"Set up id 8 for process that is down"
true,0,0,q,all (7;8) in exec id from .dqe.results,1,,"Check correct id's added to the table"
true,0,0,q,all `.dqe.test in exec funct from .dqe.results,1,,"Check correct function's added to the table"
true,0,0,q,all `testing in exec vars from .dqe.results,1,,"Check correct varibles added to the table"
true,0,0,q,all `dqe in exec procs from .dqe.results,1,,"Check correct procs added to the table"
true,0,0,q,all `dqe1 in exec procschk from .dqe.results,1,,"Check correct chkprocs added to the table"
true,0,0,q,all all testmeta=meta .dqe.results,1,,"Test meta still same"
comment,0,0,,start of tests for failchk function,1,,"comment"
run,0,0,q,".dqe.failchk[7;"error:test error proc not there";`dqe1]",1,,"Run failchk function when proc doesn't exist"
true,0,0,q,all `0=exec output from .dqe.results where id=7,1,,,"Test output changed to false"
true,0,0,q,all (enlist "error:test error proc not there") in exec descp from .dqe.results where id=7,1,,"Test descp has been changed to error message"
true,0,0,q,all `failed=exec chkstatus from .dqe.results where id=7,1,,"Test status changed to failed"
run,0,0,q,".dqe.failchk[8;"error:test error proc down";`]",1,,"Run failchk function when proc down"
true,0,0,q,all `0=exec output from .dqe.results where id=8,1,,,"Test output changed to false"
true,0,0,q,all (enlist "error:test error proc down") in exec descp from .dqe.results where id=8,1,,"Test descp has been changed to error message"
true,0,0,q,all `failed=exec chkstatus from .dqe.results where id=8,1,,"Test status changed to failed"
after,0,0,q,.dqe.results:0#.dqe.results,1,,"Empty .dqe.results table"
